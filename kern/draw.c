#include <inc/string.h>
#include <inc/stdio.h>

#include <kern/video.h>

#define TEXT "my oslab"
#define PIC {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,1,9,9,9,1,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,15,15,15,15,15,0,1,1,1,1,1,1,1,1,1,0,1,1,0,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,9,9,9,15,15,15,15,0,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,15,0,0,0,0,0,0,1,9,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,0,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,15,15,0,0,15,0,0,0,9,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,15,15,0,9,15,15,0,0,9,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,15,0,0,0,15,15,0,0,9,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,15,15,15,15,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,\
	0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,15,15,15,15,15,15,15,0,0,0,1,1,1,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	0,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,15,15,15,15,15,15,15,9,0,0,0,9,9,9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,15,15,15,15,15,15,15,15,15,0,0,0,0,9,9,9,1,1,1,1,1,1,1,0,1,0,0,1,1,\
	1,1,1,1,1,1,0,1,1,1,1,0,0,0,0,0,15,15,15,15,15,15,15,15,15,1,0,1,0,1,9,9,1,1,1,1,1,0,1,1,1,0,1,1,0,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,15,15,15,15,15,15,15,15,15,0,0,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,0,1,1,\
	1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,0,15,15,15,15,15,15,15,15,15,0,0,1,1,9,9,9,1,9,1,1,1,1,1,0,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,15,0,15,0,15,9,9,15,0,1,9,9,1,9,9,1,1,1,1,1,1,1,1,1,0,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,9,0,0,15,15,15,0,0,15,0,0,15,15,15,15,0,15,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,\
	1,1,1,0,1,0,1,1,1,1,1,1,0,0,15,15,15,15,15,0,15,0,0,15,15,15,15,0,0,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,\
	1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,15,15,0,0,0,0,0,15,0,15,0,1,1,1,9,9,9,9,9,9,9,1,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,9,1,1,0,0,0,0,0,1,0,0,0,0,0,0,1,9,1,9,1,9,9,9,9,9,9,1,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,15,0,1,1,1,1,1,9,1,9,9,1,9,9,1,9,9,9,1,9,9,9,9,9,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,1,1,9,1,1,1,9,1,1,9,1,9,1,9,9,1,9,9,9,9,9,9,1,1,1,1,1,\
	1,1,1,0,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,1,1,1,1,9,9,9,1,9,9,9,9,9,1,1,1,1,1,\
	1,1,1,1,1,1,1,1,1,9,15,9,9,9,9,9,9,15,1,1,1,9,15,1,9,9,1,9,1,1,15,9,1,9,9,9,1,9,9,9,1,1,9,1,1,\
	1,1,1,1,1,1,1,1,15,15,15,15,15,15,15,9,15,15,9,1,9,15,15,1,15,15,15,1,9,15,15,15,1,1,9,9,9,9,9,9,9,9,9,9,9,\
	1,1,1,1,1,1,1,1,1,0,1,15,15,1,0,0,15,15,0,1,9,15,15,1,9,15,15,15,15,15,15,0,1,9,1,9,1,9,9,9,9,9,9,9,9,\
	1,1,1,1,1,1,1,1,1,1,9,15,15,0,1,1,15,15,1,1,9,15,15,1,1,9,15,15,15,15,0,1,9,9,1,9,9,9,9,1,9,9,9,9,9,\
	1,1,9,9,1,1,1,1,1,9,9,15,15,1,9,9,15,15,0,1,9,15,15,1,9,1,15,15,15,1,1,9,1,9,9,1,9,9,9,9,9,9,9,9,9,\
	9,9,9,9,1,1,1,1,1,1,9,15,15,1,1,1,15,15,9,1,1,15,15,1,1,15,15,15,15,15,15,9,9,1,9,9,1,9,9,1,9,9,9,9,9,\
	9,9,9,9,9,9,9,1,1,1,1,15,15,0,1,1,15,15,15,15,15,15,15,0,15,15,15,0,9,15,15,9,1,9,9,9,9,9,9,9,9,9,9,9,9,\
	9,9,9,9,9,9,9,9,1,1,1,15,15,0,1,9,1,15,15,15,15,1,0,1,15,15,0,0,1,9,15,15,1,1,1,9,9,9,9,9,9,9,9,9,9,\
	9,9,9,9,9,9,9,9,9,9,1,1,0,1,1,1,1,1,0,1,0,0,1,9,1,1,0,1,9,1,1,0,1,9,9,9,1,9,9,9,9,9,9,9,9}

#define width 45
#define height 32
static int c[width*height]=PIC;

void
redraw_screen() 
{   
	while(1){
		cprintf("is going to prepare buffer\n");
		prepare_buffer();
		cprintf("has prepared buffer\n");
		int x,y;
		for(y=0;y<height*5;y++){
			for(x=0;x<width*5;x++){
				draw_pixel(y,x,c[y/5*width+x/5]);
			}
		}
		cprintf("is going to display buffer\n");
		display_buffer();
		cprintf("displayed buffer\n");
	}
}


